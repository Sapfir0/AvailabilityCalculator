(this.webpackJsonpwebqgis=this.webpackJsonpwebqgis||[]).push([[0],{46:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),i=(a(46),a(23)),s=a(5),u=a.n(s),l=a(10),b=a(12),f=a(24),j=a(18),d=a.n(j),g=a(11),h="pk.eyJ1Ijoic2FwZmlyMCIsImEiOiJja284ZGk3aTkwNnZoMnBxbXM4eWl4Mmw4In0.XwtrCKXKgPC5fY_6a18XJg",m={type:"geojson",data:{type:"FeatureCollection",features:[]}},p={id:"isoLayer",type:"fill",source:"iso",layout:{},paint:{"fill-color":"#5a3fc0","fill-opacity":.3}},v={MapStore:Symbol.for("MapStore")},x="https://api.mapbox.com/isochrone/v1/mapbox/";function O(e,t){return y.apply(this,arguments)}function y(){return(y=Object(l.a)(u.a.mark((function e(t,a){var n,r,c,o,i,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:"walking",r=s.length>3&&void 0!==s[3]?s[3]:"10",c="".concat(x).concat(n,"/").concat(a,",").concat(t,"?contours_minutes=").concat(r,"&polygons=true&access_token=").concat(h),e.next=5,fetch(c);case 5:return o=e.sent,e.next=8,o.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w,M,k,C=a(17),S=(a(91),a(41)),N=a(1);!function(e){e[e.walking=0]="walking",e[e.cycling=1]="cycling",e[e.driving=2]="driving"}(w||(w={})),function(e){e[e.isochrones=0]="isochrones",e[e.byAir=1]="byAir"}(M||(M={}));var L=Object(C.injectable)()(k=function e(){var t=this;Object(S.a)(this,e),this.maxDuration="10",this.travelMode=w[w.walking],this.bufferization=M[M.isochrones],this.setTravelMode=function(e){t.travelMode=e},this.setBufferizationMode=function(e){t.bufferization=e},this.setMaxDuration=function(e){t.maxDuration=e},Object(N.m)(this,{setMaxDuration:N.f,setTravelMode:N.f,setBufferizationMode:N.f,maxDuration:N.n,travelMode:N.n,bufferization:N.n})})||k,z=new C.Container;function D(e){var t=Object(n.useState)((function(){return z.get(e)})),a=Object(b.a)(t,2),r=a[0];a[1];return r}z.bind(v.MapStore).to(L).inSingletonScope();var V=a(2),T=Object(g.a)((function(e){var t=e.value,a=e.defaultValue,n=e.onChange;return Object(V.jsxs)("label",{className:"toggle-container",children:[Object(V.jsx)("input",{name:t,type:"radio",value:t,checked:a===t,onChange:function(e){return n(a)}}),Object(V.jsx)("div",{className:"toggle toggle--active-null toggle--null",children:a})]})})),A=Object(g.a)((function(){var e=D(v.MapStore),t=e.setMaxDuration,a=e.setTravelMode,n=e.maxDuration,r=e.travelMode,c=e.bufferization,o=e.setBufferizationMode;return Object(V.jsx)("div",{className:"absolute fl my24 mx24 py24 px24 bg-gray-faint round",children:Object(V.jsxs)("form",{id:"params",children:[Object(V.jsx)("h4",{className:"txt-m txt-bold mb6",children:"Choose a travel mode:"}),Object(V.jsxs)("div",{className:"mb12 mr12 toggle-group align-center",children:[Object(V.jsx)(T,{value:r,defaultValue:w[w.walking],onChange:a}),Object(V.jsx)(T,{value:r,defaultValue:w[w.cycling],onChange:a}),Object(V.jsx)(T,{value:r,defaultValue:w[w.driving],onChange:a})]}),Object(V.jsx)("h4",{className:"txt-m txt-bold mb6",children:"Choose a maximum duration:"}),Object(V.jsxs)("div",{className:"mb12 mr12 toggle-group align-center",children:[Object(V.jsx)(T,{value:n,defaultValue:"10",onChange:t}),Object(V.jsx)(T,{value:n,defaultValue:"20",onChange:t}),Object(V.jsx)(T,{value:n,defaultValue:"30",onChange:t})]}),Object(V.jsx)("h4",{className:"txt-m txt-bold mb6",children:"Choose a bufferization method:"}),Object(V.jsxs)("div",{className:"mb12 mr12 toggle-group align-center",children:[Object(V.jsx)(T,{value:c,defaultValue:M[M.byAir],onChange:o}),Object(V.jsx)(T,{value:c,defaultValue:M[M.isochrones],onChange:o})]})]})})}));d.a.accessToken=h;var B=Object(g.a)((function(){var e=D(v.MapStore),t=Object(n.useRef)(null),a=Object(n.useState)(44.5),r=Object(b.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(48.7),j=Object(b.a)(s,2),g=j[0],h=j[1],x=Object(n.useState)(11.5),y=Object(b.a)(x,2),w=y[0];y[1];return Object(n.useEffect)((function(){var a=new d.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[c,g],zoom:w});a.on("load",Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.addSource("iso",m),a.addLayer(p,"poi-label");case 2:case"end":return e.stop()}}),e)}))));var n=new d.a.Marker({color:"#314ccd"});return a.on("click",function(){var t=Object(l.a)(u.a.mark((function t(r){var c,s,b;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(r.lngLat.lat),o(r.lngLat.lng),n.setLngLat(r.lngLat).addTo(a),s=a.getSource("iso"),c={},Object(i.a)(c,M[M.isochrones],Object(l.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(r.lngLat.lat,r.lngLat.lng,e.travelMode,e.maxDuration);case 2:a=t.sent,s.setData(a);case 4:case"end":return t.stop()}}),t)})))),Object(i.a)(c,M[M.byAir],Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(f.buffer)(Object(f.point)([r.lngLat.lng,r.lngLat.lat]),500,{units:"meters"}),s.setData(t);case 2:case"end":return e.stop()}}),e)})))),b=c,t.next=7,b[e.bufferization]();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),function(){return a.remove()}}),[]),Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{className:"map-container",ref:t}),Object(V.jsx)(A,{})]})}));a(93);var I=function(){return Object(V.jsx)("div",{className:"App",children:Object(V.jsx)(B,{})})};o.a.render(Object(V.jsx)(r.a.StrictMode,{children:Object(V.jsx)(I,{})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.edd28781.chunk.js.map